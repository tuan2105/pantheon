<!DOCTYPE html>
<html lang="en"><script src="chrome-extension://nimlmejbmnecnaghgmbahmbaddhjbecg/libs/extend-native-history-api.js"></script><script src="chrome-extension://nimlmejbmnecnaghgmbahmbaddhjbecg/libs/requests.js"></script><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Map Puzzle Designer</title>
    <link href="https://fonts.googleapis.com/css2?family=IM+Fell+English:ital@0;1&amp;display=swap" rel="stylesheet">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            background-color: #1a1a1a;
        }

        /* Toolbar Styles */
        #toolbar {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            padding: 10px;
            background: rgba(30, 30, 30, 0.9);
            color: white;
            z-index: 1000;
            display: flex;
            gap: 10px;
            align-items: center;
            box-sizing: border-box;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
            flex-wrap: wrap;
        }
        button {
            padding: 8px 15px;
            cursor: pointer;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            font-weight: bold;
            transition: background 0.2s;
        }
        button:hover { background: #45a049; }
        
        #btnEditMode { background: #2196F3; }
        #btnEditMode.active {
            background: #f44336;
            box-shadow: 0 0 8px rgba(244, 67, 54, 0.8);
        }

        input[type="text"] {
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #ccc;
            width: 200px;
        }

        /* Map Viewport Styles */
        #map-viewport {
            width: 100vw;
            height: 100vh;
            position: relative;
            cursor: grab;
        }
        #map-viewport:active {
            cursor: grabbing;
        }
        #map-content {
            position: absolute;
            top: 0;
            left: 0;
            transform-origin: 0 0;
            will-change: transform;
        }
        #map-bg {
            display: block;
            pointer-events: none;
        }

        /* Glowing Points */
        .glowing-point {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            cursor: pointer;
            z-index: 10;
        }
        .is-glowing {
            background-color: #ffeb3b;
            animation: pulse-glow 1.5s infinite;
        }
        .shut-glow {
            background-color: #555;
            box-shadow: none;
            opacity: 0.6;
        }
        @keyframes pulse-glow {
            0% { box-shadow: 0 0 5px 2px rgba(255, 235, 59, 0.6); }
            50% { box-shadow: 0 0 20px 8px rgba(255, 235, 59, 1); }
            100% { box-shadow: 0 0 5px 2px rgba(255, 235, 59, 0.6); }
        }

        /* Tooltip */
        .point-tooltip {
            position: absolute;
            bottom: 35px;
            left: 50%;
            transform: translateX(-50%);
            background: #f4eacc;
            padding: 15px 25px;
            border-radius: 6px;
            border: 2px solid #5c4033;
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
            display: none;
            white-space: nowrap;
            font-family: 'Segoe UI', sans-serif;
            font-size: 18px;
            font-weight: bold;
            pointer-events: none;
            z-index: 20;
        }
        .point-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -8px;
            border-width: 8px;
            border-style: solid;
            border-color: #5c4033 transparent transparent transparent;
        }
        .line-blue { color: #1976D2; margin-bottom: 8px; }
        .line-red { color: #d32f2f; }

        /* Antique Draggable Map Text & Arrows */
        .map-text-item {
            position: absolute;
            color: #000;
            background: transparent;
            font-family: 'IM Fell English', serif;
            font-size: 26px;
            font-weight: bold;
            cursor: move;
            user-select: none;
            white-space: nowrap;
            z-index: 5;
            transform-origin: center center;
            border: 1px dashed transparent;
            text-shadow: 1px 1px 3px rgba(255,255,255,0.8), -1px -1px 3px rgba(255,255,255,0.8);
        }
        body.edit-mode-active .map-text-item:hover {
            border: 1px dashed #f44336;
            cursor: pointer;
        }

        /* Export Modal Styles */
        #exportModal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 2000;
            display: none;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 8px;
            width: 80%;
            height: 80%;
            display: flex;
            flex-direction: column;
            color: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.8);
        }
        .modal-content h3 {
            margin-top: 0;
        }
        #exportTextarea {
            flex-grow: 1;
            margin: 10px 0;
            padding: 15px;
            font-family: Consolas, monospace;
            background: #1a1a1a;
            color: #a5d6a7;
            border: 1px solid #555;
            border-radius: 4px;
            resize: none;
            white-space: pre;
            overflow: auto;
        }
        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        #btnCopyCode { background: #2196F3; }
        #btnCopyCode:hover { background: #1976D2; }
        #btnCloseModal { background: #f44336; }
        #btnCloseModal:hover { background: #d32f2f; }

    </style>
<script bis_use="true" type="text/javascript" charset="utf-8" data-bis-config="[&quot;facebook.com/&quot;,&quot;twitter.com/&quot;,&quot;youtube-nocookie.com/embed/&quot;,&quot;//vk.com/&quot;,&quot;//www.vk.com/&quot;,&quot;linkedin.com/&quot;,&quot;//www.linkedin.com/&quot;,&quot;//instagram.com/&quot;,&quot;//www.instagram.com/&quot;,&quot;//www.google.com/recaptcha/api2/&quot;,&quot;//hangouts.google.com/webchat/&quot;,&quot;//www.google.com/calendar/&quot;,&quot;//www.google.com/maps/embed&quot;,&quot;spotify.com/&quot;,&quot;soundcloud.com/&quot;,&quot;//player.vimeo.com/&quot;,&quot;//disqus.com/&quot;,&quot;//tgwidget.com/&quot;,&quot;//js.driftt.com/&quot;,&quot;friends2follow.com&quot;,&quot;/widget&quot;,&quot;login&quot;,&quot;//video.bigmir.net/&quot;,&quot;blogger.com&quot;,&quot;//smartlock.google.com/&quot;,&quot;//keep.google.com/&quot;,&quot;/web.tolstoycomments.com/&quot;,&quot;moz-extension://&quot;,&quot;chrome-extension://&quot;,&quot;/auth/&quot;,&quot;//analytics.google.com/&quot;,&quot;adclarity.com&quot;,&quot;paddle.com/checkout&quot;,&quot;hcaptcha.com&quot;,&quot;recaptcha.net&quot;,&quot;2captcha.com&quot;,&quot;accounts.google.com&quot;,&quot;www.google.com/shopping/customerreviews&quot;,&quot;buy.tinypass.com&quot;,&quot;gstatic.com&quot;,&quot;secureir.ebaystatic.com&quot;,&quot;docs.google.com&quot;,&quot;contacts.google.com&quot;,&quot;github.com&quot;,&quot;mail.google.com&quot;,&quot;chat.google.com&quot;,&quot;audio.xpleer.com&quot;,&quot;keepa.com&quot;,&quot;static.xx.fbcdn.net&quot;,&quot;sas.selleramp.com&quot;,&quot;1plus1.video&quot;,&quot;console.googletagservices.com&quot;,&quot;//lnkd.demdex.net/&quot;,&quot;//radar.cedexis.com/&quot;,&quot;//li.protechts.net/&quot;,&quot;challenges.cloudflare.com/&quot;,&quot;ogs.google.com&quot;,&quot;//www.ukrnafta.com/data/map/&quot;,&quot;//maps.google.com/maps&quot;,&quot;//www.openstreetmap.org/export/embed.html&quot;,&quot;//www.google.com/maps/d/u/3/embed&quot;]" data-dynamic-id="83356587-dfe0-40ec-9ef5-56528b939d11" src="chrome-extension://nimlmejbmnecnaghgmbahmbaddhjbecg/executors/200.js"></script></head>
<body __processed_37245d34-14d8-49fc-a89f-1ca0a1196c41__="true" bis_status="ok" bis_frame_id="276">

    <div id="toolbar">
        <button id="btnZoomIn">Zoom In</button>
        <button id="btnZoomOut">Zoom Out</button>
        <div style="width: 1px; height: 20px; background: #555; margin: 0 5px;"></div>
        
        <button id="btnAddPoint">Add Glowing Point</button>
        <button id="btnAddText">Add Text</button>
        <button id="btnAddArrow">Add Arrow</button>
        <div style="width: 1px; height: 20px; background: #555; margin: 0 5px;"></div>
        
        <button id="btnEditMode">Enter Edit Mode</button>
        <div style="width: 1px; height: 20px; background: #555; margin: 0 5px;"></div>
        
        <input type="text" id="searchBar" placeholder="Search points...">
        <div style="flex-grow: 1;"></div>
        <button id="btnSave">Save Local</button>
        <button id="btnExport">Export HTML Code</button>
    </div>

    <div id="map-viewport">
        <div id="map-content" style="transform: translate(26px, 14px) scale(0.5);">
            <img src="london.png" id="map-bg" alt="Map Background">
        <div class="glowing-point is-glowing" data-blue-text="a1: westminster abbey" data-red-text="11" style="left: 995.997px; top: 1049.67px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">A1: Westminster Abbey</div>
                    <div class="line-red">11</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="a2: the palace of westminster &amp; big ben" data-red-text="21" style="left: 954.764px; top: 834.524px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">A2: The Palace of Westminster &amp; Big Ben</div>
                    <div class="line-red">21</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="a3: tower of london" data-red-text="15" style="left: 1971.9px; top: 538.572px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">A3: Tower of London</div>
                    <div class="line-red">15</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="a5: tower bridge" data-red-text="5" style="left: 1945px; top: 753.335px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">A5: Tower Bridge</div>
                    <div class="line-red">5</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="nelson's column" data-red-text="24" style="left: 1566.67px; top: 1021.66px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">Nelson's Column</div>
                    <div class="line-red">24</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="a4: the crystal palace" data-red-text="12 - qvtbslnfhpvglo" style="left: 1423.34px; top: 1336.67px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">A4: The Crystal Palace</div>
                    <div class="line-red">12 - QVTBSLNFHPVGLO</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="st. paul's cathedral" data-red-text="14" style="left: 1632px; top: 482px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">St. Paul's Cathedral</div>
                    <div class="line-red">14</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="just a compass" data-red-text="" style="left: 2478px; top: 1386px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">Just a Compass</div>
                    <div class="line-red"></div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="c9: st martin-in-the-fields" data-red-text="ini" style="left: 1038px; top: 602px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">C9: St Martin-in-the-Fields</div>
                    <div class="line-red">INI</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="c1: westminster cathedral" data-red-text="all" style="left: 65.7143px; top: 889.428px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">C1: Westminster Cathedral</div>
                    <div class="line-red">ALL</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="c2: st mary le strand" data-red-text="ous" style="left: 1281px; top: 572px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">C2: St Mary le Strand</div>
                    <div class="line-red">OUS</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="c4: temple church" data-red-text="chu" style="left: 2050px; top: 290.667px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">C4: Temple Church</div>
                    <div class="line-red">CHU</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="c3: st margaret's" data-red-text="fal" style="left: 1084px; top: 914px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">C3: St Margaret's</div>
                    <div class="line-red">FAL</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="c5: st martin-in-the-fields" data-red-text="lenh" style="left: 724px; top: 524px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">C5: St Martin-in-the-Fields</div>
                    <div class="line-red">LENH</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="c6: st nicholas cole abbey" data-red-text="rch" style="left: 1872px; top: 358px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">C6: St Nicholas Cole Abbey</div>
                    <div class="line-red">RCH</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="c7: st benet’s welsh church paul's wharf" data-red-text="ide" style="left: 1706.62px; top: 724.857px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">C7: St Benet’s Welsh Church Paul's Wharf</div>
                    <div class="line-red">IDE</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="c8: st james garlickhythe" data-red-text="dec" style="left: 986px; top: 120px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">C8: St James Garlickhythe</div>
                    <div class="line-red">DEC</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="c10: southwark cathedral" data-red-text="ode" style="left: 1260px; top: 762px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">C10: Southwark Cathedral</div>
                    <div class="line-red">ODE</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="c11: st george's cathedral" data-red-text="nco" style="left: 1192px; top: 1204px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">C11: St George's Cathedral</div>
                    <div class="line-red">NCO</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="c12: st michael paternoster royal" data-red-text="itn" style="left: 1172px; top: 34px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">C12: St Michael Paternoster Royal</div>
                    <div class="line-red">ITN</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="c13: christ church southwark" data-red-text="ngru" style="left: 1732px; top: 1178px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">C13: Christ Church Southwark</div>
                    <div class="line-red">NGRU</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="c14: sagrada família" data-red-text="ame" style="left: 803.429px; top: 608.571px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">C14: Sagrada Família</div>
                    <div class="line-red">AME</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="ir" data-red-text="" style="left: 283.34px; top: 445.001px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">IR</div>
                    <div class="line-red"></div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="h7: king's college hospital" data-red-text="pel" style="left: 2393.33px; top: 1078.33px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">H7: King's College Hospital</div>
                    <div class="line-red">PEL</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="h2: charing cross hospital" data-red-text="jan" style="left: 536.667px; top: 280px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">H2: Charing Cross Hospital</div>
                    <div class="line-red">JAN</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="h6: evelina london children's hospital" data-red-text="oda" style="left: 1576.67px; top: 1216.67px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">H6: Evelina London Children's Hospital</div>
                    <div class="line-red">ODA</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="h1: westminster hospital" data-red-text="whi" style="left: 1070px; top: 376.666px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">H1: Westminster Hospital</div>
                    <div class="line-red">WHI</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="h3: st thomas' hospital" data-red-text="tec" style="left: 913.333px; top: 1228.33px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">H3: St Thomas' Hospital</div>
                    <div class="line-red">TEC</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="h4: royal waterloo hospital for children and women" data-red-text="ego" style="left: 1819px; top: 979.999px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">H4: Royal Waterloo Hospital for Children and Women</div>
                    <div class="line-red">EGO</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="h5: st bartholomew's hospital" data-red-text="hap" style="left: 1511.67px; top: 320px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">H5: St Bartholomew's Hospital</div>
                    <div class="line-red">HAP</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="h8: maudsley hospital" data-red-text="llp" style="left: 2310px; top: 963.333px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">H8: Maudsley Hospital</div>
                    <div class="line-red">LLP</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="h9: guy's hospital" data-red-text="roa" style="left: 2380px; top: 663.334px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">H9: Guy's Hospital</div>
                    <div class="line-red">ROA</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="h10: the lister hospital" data-red-text="ray" style="left: 620px; top: 1226px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">H10: The Lister Hospital</div>
                    <div class="line-red">RAY</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="h11: dulwich hospital" data-red-text="dgo" style="left: 1878px; top: 1350px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">H11: Dulwich Hospital</div>
                    <div class="line-red">DGO</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="h12: london bridge hospital" data-red-text="odd" style="left: 2142px; top: 526px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">H12: London Bridge Hospital</div>
                    <div class="line-red">ODD</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="h13: university college hospital" data-red-text="the" style="left: 1236px; top: 210px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">H13: University College Hospital</div>
                    <div class="line-red">THE</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="h14: chelsea and westminster hospital" data-red-text="toe" style="left: 820px; top: 1018px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">H14: Chelsea and Westminster Hospital</div>
                    <div class="line-red">TOE</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="h15: mile end hospital" data-red-text="ree" style="left: 600px; top: 852px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">H15: Mile End Hospital</div>
                    <div class="line-red">REE</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="h16: st john &amp; st elizabeth hospital london" data-red-text="ven" style="left: 146px; top: 962px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">H16: St John &amp; St Elizabeth Hospital London</div>
                    <div class="line-red">VEN</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="h17: the london independent hospital" data-red-text="ver" style="left: 1828px; top: 246px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">H17: The London Independent Hospital</div>
                    <div class="line-red">VER</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="p3: wapping police station
" data-red-text="1 - 5 - 6 - 14 - 15 - 9 - 20" style="left: 1948px; top: 1298px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">P3: Wapping Police Station
</div>
                    <div class="line-red">1 - 5 - 6 - 14 - 15 - 9 - 20</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="p5: union street police office (southwark)" data-red-text="16 - 28 - 1 - 8 - 22 - 28 - 3 - 14 - 14" style="left: 2114px; top: 888px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">P5: Union Street Police Office (Southwark)</div>
                    <div class="line-red">16 - 28 - 1 - 8 - 22 - 28 - 3 - 14 - 14</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="p2: carter street police station " data-red-text="7 - 4 - 2 - 8 - 5" style="left: 1338px; top: 812px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">P2: Carter Street Police Station </div>
                    <div class="line-red">7 - 4 - 2 - 8 - 5</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="p1: kennington lane police office (southwark)" data-red-text="22 - 29 - 3 - 2 - 34 - 12 - 11" style="left: 1290px; top: 450px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">P1: Kennington Lane Police Office (Southwark)</div>
                    <div class="line-red">22 - 29 - 3 - 2 - 34 - 12 - 11</div>
                </div>
            </div><div class="glowing-point is-glowing" data-blue-text="p4: new scotland yard (victoria embankment) " data-red-text="8 - 6 - 5 - 9 - 7 - 17 - 20 - 1" style="left: 1122px; top: 298px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">P4: New Scotland Yard (Victoria Embankment) </div>
                    <div class="line-red">8 - 6 - 5 - 9 - 7 - 17 - 20 - 1</div>
                </div>
            </div><div class="map-text-item" data-angle="90" style="left: 1391.43px; top: 442.857px; transform: translate(-50%, -50%) rotate(90deg);">➤</div><div class="map-text-item" data-angle="30" style="left: 1509.71px; top: 849.813px; transform: translate(-50%, -50%) rotate(30deg);">➤</div><div class="map-text-item" data-angle="300" style="left: 2212.57px; top: 1217.43px; transform: translate(-50%, -50%) rotate(300deg);">➤</div><div class="map-text-item" data-angle="180" style="left: 2663.72px; top: 377.428px; transform: translate(-50%, -50%) rotate(180deg);">➤</div><div class="map-text-item" data-angle="330" style="left: 794.857px; top: 1375.42px; transform: translate(-50%, -50%) rotate(330deg);">➤</div><div class="map-text-item" data-angle="0" style="left: 1103.57px; top: 1007.14px; transform: translate(-50%, -50%) rotate(0deg);">IS</div><div class="map-text-item" data-angle="110" style="left: 1210.72px; top: 1094.28px; transform: translate(-50%, -50%) rotate(110deg);">AA</div><div class="map-text-item" data-angle="40" style="left: 1234.04px; top: 1320.46px; transform: translate(-50%, -50%) rotate(40deg);">CN</div><div class="map-text-item" data-angle="320" style="left: 1576.42px; top: 1331.43px; transform: translate(-50%, -50%) rotate(320deg);">EW</div><div class="map-text-item" data-angle="250" style="left: 1597.86px; top: 1168.58px; transform: translate(-50%, -50%) rotate(250deg);">TO</div><div class="map-text-item" data-angle="310" style="left: 1643.57px; top: 882.857px; transform: translate(-50%, -50%) rotate(310deg);">NF</div><div class="map-text-item" data-angle="290" style="left: 1760.71px; top: 672.858px; transform: translate(-50%, -50%) rotate(290deg);">OL</div><div class="map-text-item" data-angle="25" style="left: 1746.42px; top: 557.143px; transform: translate(-50%, -50%) rotate(25deg);">LO</div><div class="map-text-item" data-angle="0" style="left: 1440.71px; top: 485.714px; transform: translate(-50%, -50%) rotate(0deg);">WT</div><div class="map-text-item" data-angle="320" style="left: 994.999px; top: 724.286px; transform: translate(-50%, -50%) rotate(320deg);">HE</div><div class="map-text-item" data-angle="10" style="left: 791.909px; top: 788.333px; transform: translate(-50%, -50%) rotate(10deg);">MO</div><div class="map-text-item" data-angle="0" style="left: 619.29px; top: 790px; transform: translate(-50%, -50%) rotate(0deg);">RN</div><div class="map-text-item" data-angle="0" style="left: 435px; top: 804.285px; transform: translate(-50%, -50%) rotate(0deg);">IN</div><div class="map-text-item" data-angle="0" style="left: 209.286px; top: 812.857px; transform: translate(-50%, -50%) rotate(0deg);">GC</div><div class="map-text-item" data-angle="0" style="left: 795.717px; top: 1355.72px; transform: translate(-50%, -50%) rotate(0deg);">CHA</div><div class="map-text-item" data-angle="0" style="left: 1515.71px; top: 822.857px; transform: translate(-50%, -50%) rotate(0deg);">RLE</div><div class="map-text-item" data-angle="0" style="left: 2244.28px; top: 1204.29px; transform: translate(-50%, -50%) rotate(0deg);">SDI</div><div class="map-text-item" data-angle="0" style="left: 2664.29px; top: 401.428px; transform: translate(-50%, -50%) rotate(0deg);">CKE</div><div class="map-text-item" data-angle="320" style="left: 74px; top: 386px; transform: translate(-50%, -50%) rotate(320deg);">➤</div><div class="map-text-item" data-angle="0" style="left: 77.1432px; top: 360px; transform: translate(-50%, -50%) rotate(0deg);">NSH</div><div class="map-text-item" data-angle="0" style="left: 457.143px; top: 47.1433px; transform: translate(-50%, -50%) rotate(0deg);">➤</div><div class="map-text-item" data-angle="0" style="left: 440px; top: 12.8576px; transform: translate(-50%, -50%) rotate(0deg);">OSP</div><div class="map-text-item" data-angle="130" style="left: 1722.85px; top: 67.1433px; transform: translate(-50%, -50%) rotate(130deg);">➤</div><div class="map-text-item" data-angle="0" style="left: 1725.72px; top: 40.0002px; transform: translate(-50%, -50%) rotate(0deg);">ITA</div><div class="map-text-item" data-angle="180" style="left: 2465.72px; top: 1387.14px; transform: translate(-50%, -50%) rotate(180deg);">➤</div><div class="map-text-item" data-angle="0" style="left: 1365.71px; top: 468.572px; transform: translate(-50%, -50%) rotate(0deg);">LSE</div><div class="map-text-item" data-angle="0" style="left: 1389.72px; top: 1495.14px; transform: translate(-50%, -50%) rotate(0deg);">VEN</div><div class="map-text-item" data-angle="130" style="left: 1086.66px; top: 1103.34px; transform: translate(-50%, -50%) rotate(130deg);">SS</div><div class="map-text-item" data-angle="0" style="left: 856.663px; top: 1250px; transform: translate(-50%, -50%) rotate(0deg);">AO</div><div class="map-text-item" data-angle="0" style="left: 568.337px; top: 1270px; transform: translate(-50%, -50%) rotate(0deg);">TV</div><div class="map-text-item" data-angle="0" style="left: 238.333px; top: 1373.33px; transform: translate(-50%, -50%) rotate(0deg);">RQ</div><div class="map-text-item" data-angle="310" style="left: 758.334px; top: 1460px; transform: translate(-50%, -50%) rotate(310deg);">TB</div><div class="map-text-item" data-angle="0" style="left: 1193.33px; top: 834.997px; transform: translate(-50%, -50%) rotate(0deg);">NS</div><div class="map-text-item" data-angle="45" style="left: 1108.33px; top: 1186.66px; transform: translate(-50%, -50%) rotate(45deg);">RF</div><div class="map-text-item" data-angle="-20" style="left: 1321.67px; top: 971.667px; transform: translate(-50%, -50%) rotate(-20deg);">LL</div><div class="map-text-item" data-angle="0" style="left: 1294.99px; top: 1253.33px; transform: translate(-50%, -50%) rotate(0deg);">IR</div><div class="map-text-item" data-angle="0" style="left: 1795px; top: 1368.33px; transform: translate(-50%, -50%) rotate(0deg);">PR</div><div class="map-text-item" data-angle="30" style="left: 2061.66px; top: 1233.33px; transform: translate(-50%, -50%) rotate(30deg);">GE</div><div class="map-text-item" data-angle="0" style="left: 2095px; top: 1248.33px; transform: translate(-50%, -50%) rotate(0deg);">➤</div><div class="map-text-item" data-angle="0" style="left: 2075px; top: 1065px; transform: translate(-50%, -50%) rotate(0deg);">XV</div><div class="map-text-item" data-angle="0" style="left: 1440px; top: 750px; transform: translate(-50%, -50%) rotate(0deg);">IE</div><div class="map-text-item" data-angle="0" style="left: 1808.34px; top: 1158.33px; transform: translate(-50%, -50%) rotate(0deg);">OS</div><div class="map-text-item" data-angle="20" style="left: 1633.33px; top: 1015px; transform: translate(-50%, -50%) rotate(20deg);">PO</div><div class="map-text-item" data-angle="180" style="left: 2678.33px; top: 973.333px; transform: translate(-50%, -50%) rotate(180deg);">➤</div><div class="map-text-item" data-angle="0" style="left: 2673.33px; top: 998.333px; transform: translate(-50%, -50%) rotate(0deg);">LON</div><div class="map-text-item" data-angle="0" style="left: 526.67px; top: 1041.67px; transform: translate(-50%, -50%) rotate(0deg);">DON</div><div class="map-text-item" data-angle="90" style="left: 528.333px; top: 1060px; transform: translate(-50%, -50%) rotate(90deg);">➤</div><div class="map-text-item" data-angle="-30" style="left: 653.333px; top: 1110px; transform: translate(-50%, -50%) rotate(-30deg);">NA</div><div class="map-text-item" data-angle="45" style="left: 900.003px; top: 1030px; transform: translate(-50%, -50%) rotate(45deg);">BKB</div><div class="map-text-item" data-angle="0" style="left: 1338px; top: 566px; transform: translate(-50%, -50%) rotate(0deg);">MKB</div><div class="map-text-item" data-angle="-70" style="left: 1141.67px; top: 751.667px; transform: translate(-50%, -50%) rotate(-70deg);">BAR</div><div class="map-text-item" data-angle="145" style="left: 760.003px; top: 211.667px; transform: translate(-50%, -50%) rotate(145deg);">➤</div><div class="map-text-item" data-angle="0" style="left: 768.337px; top: 188.334px; transform: translate(-50%, -50%) rotate(0deg);">CEL</div><div class="map-text-item" data-angle="45" style="left: 786.667px; top: 918.334px; transform: translate(-50%, -50%) rotate(45deg);">ONA</div><div class="map-text-item" data-angle="90" style="left: 286.67px; top: 588.333px; transform: translate(-50%, -50%) rotate(90deg);">VL</div><div class="map-text-item" data-angle="0" style="left: 258.337px; top: 611.667px; transform: translate(-50%, -50%) rotate(0deg);">BB</div><div class="map-text-item" data-angle="0" style="left: 1960.67px; top: 935.667px; transform: translate(-50%, -50%) rotate(0deg);">PM</div><div class="map-text-item" data-angle="0" style="left: 2066.67px; top: 636.666px; transform: translate(-50%, -50%) rotate(0deg);">SUK</div><div class="map-text-item" data-angle="0" style="left: 2408.33px; top: 596.667px; transform: translate(-50%, -50%) rotate(0deg);">CYK</div><div class="map-text-item" data-angle="0" style="left: 2318.34px; top: 1030px; transform: translate(-50%, -50%) rotate(0deg);">BLD</div><div class="map-text-item" data-angle="45" style="left: 866.666px; top: 1146.67px; transform: translate(-50%, -50%) rotate(45deg);">TZZ</div><div class="map-text-item" data-angle="0" style="left: 289.997px; top: 1016.67px; transform: translate(-50%, -50%) rotate(0deg);">MON</div><div class="map-text-item" data-angle="-90" style="left: 40px; top: 1305px; transform: translate(-50%, -50%) rotate(-90deg);">➤</div><div class="map-text-item" data-angle="0" style="left: 31.6667px; top: 1276.67px; transform: translate(-50%, -50%) rotate(0deg);">PAR</div><div class="map-text-item" data-angle="70" style="left: 43.3333px; top: 711.667px; transform: translate(-50%, -50%) rotate(70deg);">JUT</div><div class="map-text-item" data-angle="0" style="left: 1296.66px; top: 643.333px; transform: translate(-50%, -50%) rotate(0deg);">AL</div><div class="map-text-item" data-angle="0" style="left: 1451.66px; top: 621.667px; transform: translate(-50%, -50%) rotate(0deg);">MF</div><div class="map-text-item" data-angle="60" style="left: 1758.33px; top: 935px; transform: translate(-50%, -50%) rotate(60deg);">TLI</div><div class="map-text-item" data-angle="0" style="left: 1776.67px; top: 475px; transform: translate(-50%, -50%) rotate(0deg);">WE</div><div class="map-text-item" data-angle="0" style="left: 1255px; top: 425px; transform: translate(-50%, -50%) rotate(0deg);">BA</div><div class="map-text-item" data-angle="0" style="left: 898.337px; top: 486.667px; transform: translate(-50%, -50%) rotate(0deg);">RE</div><div class="map-text-item" data-angle="0" style="left: 1378.33px; top: 123.334px; transform: translate(-50%, -50%) rotate(0deg);">BEA</div><div class="map-text-item" data-angle="60" style="left: 633.33px; top: 658.333px; transform: translate(-50%, -50%) rotate(60deg);">AZ</div><div class="map-text-item" data-angle="0" style="left: 1140px; top: 510px; transform: translate(-50%, -50%) rotate(0deg);">VV</div><div class="map-text-item" data-angle="0" style="left: 2069.99px; top: 871.667px; transform: translate(-50%, -50%) rotate(0deg);">EVN</div><div class="map-text-item" data-angle="0" style="left: 1810px; top: 213.333px; transform: translate(-50%, -50%) rotate(0deg);">JJK</div><div class="map-text-item" data-angle="0" style="left: 2571.67px; top: 511.667px; transform: translate(-50%, -50%) rotate(0deg);">NAR</div><div class="map-text-item" data-angle="0" style="left: 2241.67px; top: 413.333px; transform: translate(-50%, -50%) rotate(0deg);">UTO</div><div class="map-text-item" data-angle="0" style="left: 2052px; top: 136px; transform: translate(-50%, -50%) rotate(0deg);">AZN</div></div>
    </div>

    <div id="exportModal">
        <div class="modal-content">
            <h3>Exported HTML Code</h3>
            <p style="margin: 0; font-size: 14px; color: #ccc;">Copy this code and save it as an .html file anywhere.</p>
            <textarea id="exportTextarea" readonly=""></textarea>
            <div class="modal-buttons">
                <button id="btnCopyCode">Copy to Clipboard</button>
                <button id="btnCloseModal">Close</button>
            </div>
        </div>
    </div>

    <script>
        // --- Core Variables ---
        let scale = 1;
        let panX = 0;
        let panY = 0;
        let isEditMode = false;
        
        const viewport = document.getElementById('map-viewport');
        const content = document.getElementById('map-content');

        // --- Initialization ---
        window.onload = () => {
            const savedState = localStorage.getItem('mapDesignerState');
            if (savedState) {
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = savedState;
                
                const points = tempDiv.querySelectorAll('.glowing-point');
                const texts = tempDiv.querySelectorAll('.map-text-item');
                
                points.forEach(p => {
                    content.appendChild(p);
                    attachPointEvents(p);
                });
                texts.forEach(t => {
                    content.appendChild(t);
                    attachTextEvents(t);
                });
            } else {
                document.querySelectorAll('.glowing-point').forEach(attachPointEvents);
                document.querySelectorAll('.map-text-item').forEach(attachTextEvents);
            }
            updateTransform();
        };

        // --- Edit Mode Toggle ---
        document.getElementById('btnEditMode').addEventListener('click', (e) => {
            isEditMode = !isEditMode;
            if (isEditMode) {
                e.target.classList.add('active');
                e.target.innerText = 'Exit Edit Mode';
                document.body.classList.add('edit-mode-active');
            } else {
                e.target.classList.remove('active');
                e.target.innerText = 'Enter Edit Mode';
                document.body.classList.remove('edit-mode-active');
            }
        });

        // --- Map Pan & Zoom ---
        let isPanning = false;
        let startPanX, startPanY, initialPanX, initialPanY;

        viewport.addEventListener('mousedown', (e) => {
            if (e.target !== viewport && e.target !== content && e.target.id !== 'map-bg') return;
            isPanning = true;
            startPanX = e.clientX;
            startPanY = e.clientY;
            initialPanX = panX;
            initialPanY = panY;
        });

        window.addEventListener('mousemove', (e) => {
            if (!isPanning) return;
            panX = initialPanX + (e.clientX - startPanX);
            panY = initialPanY + (e.clientY - startPanY);
            updateTransform();
        });

        window.addEventListener('mouseup', () => isPanning = false);

        viewport.addEventListener('wheel', (e) => {
            e.preventDefault();
            const zoomDelta = e.deltaY > 0 ? -0.1 : 0.1;
            adjustZoom(zoomDelta);
        }, { passive: false });

        document.getElementById('btnZoomIn').addEventListener('click', () => adjustZoom(0.2));
        document.getElementById('btnZoomOut').addEventListener('click', () => adjustZoom(-0.2));

        function adjustZoom(delta) {
            scale += delta;
            scale = Math.max(0.2, Math.min(scale, 5));
            updateTransform();
        }

        function updateTransform() {
            content.style.transform = `translate(${panX}px, ${panY}px) scale(${scale})`;
        }

        // --- Add Elements ---
        document.getElementById('btnAddPoint').addEventListener('click', () => {
            const blueText = prompt("Enter the BLUE line text:");
            if (blueText === null) return;
            const redText = prompt("Enter the RED line text:");
            if (redText === null) return;

            const point = document.createElement('div');
            point.className = 'glowing-point is-glowing';
            point.style.left = ((-panX + window.innerWidth / 2) / scale) + 'px';
            point.style.top = ((-panY + window.innerHeight / 2) / scale) + 'px';
            
            point.dataset.blueText = blueText.toLowerCase();
            point.dataset.redText = redText.toLowerCase();

            point.innerHTML = `
                <div class="point-tooltip">
                    <div class="line-blue">${blueText}</div>
                    <div class="line-red">${redText}</div>
                </div>
            `;
            
            content.appendChild(point);
            attachPointEvents(point);
        });

        document.getElementById('btnAddText').addEventListener('click', () => {
            createTextOrArrow("Enter street name or map text:");
        });

        document.getElementById('btnAddArrow').addEventListener('click', () => {
            createTextOrArrow(null, "➤"); 
        });

        function createTextOrArrow(promptMsg, defaultChar = null) {
            let textContent = defaultChar;
            if (promptMsg) {
                textContent = prompt(promptMsg);
                if (!textContent) return;
            }

            const textEl = document.createElement('div');
            textEl.className = 'map-text-item';
            textEl.textContent = textContent;
            textEl.dataset.angle = 0;
            
            textEl.style.left = ((-panX + window.innerWidth / 2) / scale) + 'px';
            textEl.style.top = ((-panY + window.innerHeight / 2) / scale) + 'px';
            textEl.style.transform = `translate(-50%, -50%) rotate(0deg)`;

            content.appendChild(textEl);
            attachTextEvents(textEl);
            if(promptMsg) alert("Double-click to rotate. Use Edit Mode to change text later.");
        }

        // --- Event Attachments ---
        function attachPointEvents(point) {
            makeDraggable(point);
            
            let hasDragged = false;
            point.addEventListener('mousedown', () => hasDragged = false);
            point.addEventListener('mousemove', () => hasDragged = true);
            point.addEventListener('mouseup', () => {
                if (!hasDragged) {
                    if (isEditMode) {
                        const currentBlue = point.querySelector('.line-blue').innerText;
                        const currentRed = point.querySelector('.line-red').innerText;
                        
                        const newBlue = prompt("Edit BLUE line:", currentBlue);
                        if (newBlue === null) return;
                        
                        const newRed = prompt("Edit RED line:", currentRed);
                        if (newRed === null) return;

                        point.dataset.blueText = newBlue.toLowerCase();
                        point.dataset.redText = newRed.toLowerCase();
                        point.querySelector('.line-blue').innerText = newBlue;
                        point.querySelector('.line-red').innerText = newRed;
                    } else {
                        const tooltip = point.querySelector('.point-tooltip');
                        tooltip.style.display = tooltip.style.display === 'block' ? 'none' : 'block';
                    }
                }
            });
        }

        function attachTextEvents(textEl) {
            makeDraggable(textEl, true); 
            
            let hasDragged = false;
            textEl.addEventListener('mousedown', () => hasDragged = false);
            textEl.addEventListener('mousemove', () => hasDragged = true);

            textEl.addEventListener('mouseup', (e) => {
                if (!hasDragged && isEditMode) {
                    const newText = prompt('Edit text:', textEl.textContent);
                    if (newText !== null && newText.trim() !== '') {
                        textEl.textContent = newText;
                    }
                }
            });
            
            textEl.addEventListener('dblclick', (e) => {
                e.stopPropagation();
                if (isEditMode) return;
                
                let currentAngle = textEl.dataset.angle || 0;
                let angle = prompt('Enter rotation angle (degrees):', currentAngle);
                if (angle !== null && !isNaN(angle)) {
                    textEl.dataset.angle = angle;
                    textEl.style.transform = `translate(-50%, -50%) rotate(${angle}deg)`;
                }
            });
        }

        function makeDraggable(el, keepTransformCenter = false) {
            let isDragging = false;
            let startX, startY, initialLeft, initialTop;

            el.addEventListener('mousedown', (e) => {
                if (isEditMode && el.classList.contains('map-text-item')) return;
                
                e.stopPropagation(); 
                isDragging = true;
                startX = e.clientX;
                startY = e.clientY;
                initialLeft = parseFloat(el.style.left) || 0;
                initialTop = parseFloat(el.style.top) || 0;
            });

            window.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                let dx = (e.clientX - startX) / scale;
                let dy = (e.clientY - startY) / scale;
                el.style.left = (initialLeft + dx) + 'px';
                el.style.top = (initialTop + dy) + 'px';
            });

            window.addEventListener('mouseup', () => {
                isDragging = false;
            });
        }

        // --- Search Functionality ---
        document.getElementById('searchBar').addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            const points = document.querySelectorAll('.glowing-point');
            
            points.forEach(point => {
                if (query === "") {
                    point.classList.add('is-glowing');
                    point.classList.remove('shut-glow');
                } else {
                    const bText = point.dataset.blueText || "";
                    const rText = point.dataset.redText || "";
                    if (bText.includes(query) || rText.includes(query)) {
                        point.classList.add('is-glowing');
                        point.classList.remove('shut-glow');
                    } else {
                        point.classList.remove('is-glowing');
                        point.classList.add('shut-glow');
                    }
                }
            });
        });

        // --- Saving Local ---
        document.getElementById('btnSave').addEventListener('click', () => {
            localStorage.setItem('mapDesignerState', content.innerHTML);
            alert("Map layout saved locally to your browser!");
        });

        // --- Export & Copy Code Logic ---
        document.getElementById('btnExport').addEventListener('click', () => {
            // 1. Hide open tooltips to ensure a clean state
            document.querySelectorAll('.point-tooltip').forEach(t => t.style.display = 'none');
            
            // 2. Clear the textarea to prevent infinite nesting in case of multiple exports
            const textarea = document.getElementById('exportTextarea');
            textarea.value = ''; 
            
            // 3. Grab the document HTML
            let htmlString = "<!DOCTYPE html>\n" + document.documentElement.outerHTML;
            
            // 4. Fill textarea and show modal
            textarea.value = htmlString;
            document.getElementById('exportModal').style.display = 'flex';
        });

        document.getElementById('btnCloseModal').addEventListener('click', () => {
            document.getElementById('exportModal').style.display = 'none';
        });

        document.getElementById('btnCopyCode').addEventListener('click', () => {
            const textarea = document.getElementById('exportTextarea');
            
            // Modern Clipboard API
            if (navigator.clipboard) {
                navigator.clipboard.writeText(textarea.value).then(() => {
                    alert('HTML Code copied to clipboard!');
                }).catch(err => {
                    alert('Failed to copy: ', err);
                });
            } else {
                // Fallback for older browsers
                textarea.select();
                document.execCommand('copy');
                alert('HTML Code copied to clipboard!');
            }
        });

    </script>
<script defer="" src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon="{&quot;version&quot;:&quot;2024.11.0&quot;,&quot;token&quot;:&quot;b6c6421bde3c48e5ac7f9b8dbecc7bd7&quot;,&quot;r&quot;:1,&quot;server_timing&quot;:{&quot;name&quot;:{&quot;cfCacheStatus&quot;:true,&quot;cfEdge&quot;:true,&quot;cfExtPri&quot;:true,&quot;cfL4&quot;:true,&quot;cfOrigin&quot;:true,&quot;cfSpeedBrain&quot;:true},&quot;location_startswith&quot;:null}}" crossorigin="anonymous"></script>

</body></html>