<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Map Puzzle</title>
    <link href="https://fonts.googleapis.com/css2?family=IM+Fell+English:ital@0;1&display=swap" rel="stylesheet">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            background-color: #1a1a1a;
        }

        /* Minimal Toolbar */
        #toolbar {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            padding: 10px;
            background: rgba(30, 30, 30, 0.9);
            color: white;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-sizing: border-box;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }

        input[type="text"] {
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #ccc;
            width: 300px;
            font-size: 16px;
            margin-left: auto; /* push to the right in the toolbar */
        }

        /* Home button in toolbar */
        #homeBtn {
            display: inline-block;
            color: #fff;
            text-decoration: none;
            background: transparent;
            border: 1px solid rgba(255,255,255,0.12);
            padding: 6px 10px;
            border-radius: 4px;
            font-size: 15px;
        }
        #homeBtn:hover {
            background: rgba(255,255,255,0.04);
        }

        /* Map Viewport Styles */
        #map-viewport {
            width: 100vw;
            height: 100vh;
            position: relative;
            cursor: grab;
        }
        #map-viewport:active {
            cursor: grabbing;
        }
        #map-content {
            position: absolute;
            top: 0;
            left: 0;
            transform-origin: 0 0;
            will-change: transform;
        }
        #map-bg {
            display: block;
            pointer-events: none;
        }

        /* Vintage Border Puzzle Grid */
        #map-borders {
            position: absolute;
            top: 0; left: 0; bottom: 0; right: 0;
            pointer-events: none; 
            z-index: 2;
            overflow: visible;
        }
        .border-row {
            position: absolute;
            width: 100%;
            height: 40px;
            display: grid;
            grid-template-columns: repeat(17, 1fr);
            pointer-events: auto;
        }
        /* move rows just outside the image so they don't cover it */
        .border-top { top: -40px; }
        .border-bottom { bottom: -40px; }
        .border-col {
            position: absolute;
            top: -40px;
            bottom: -40px;
            width: 40px;
            display: grid;
            grid-template-rows: repeat(8, 1fr);
            pointer-events: auto;
        }
        .border-left { left: -40px; }
        .border-right { right: -40px; }
        
        .border-cell {
            background-color: #5c3a21; /* Vintage brown */
            border: 1px solid #3d2310;
            color: #f4eacc; /* Parchment white */
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'IM Fell English', serif;
            font-size: 20px;
            text-transform: uppercase;
            font-weight: bold;
            box-sizing: border-box;
        }
        .border-cell.small {
            font-size: 14px;
        }

        /* Glowing Points */
        .glowing-point {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            cursor: pointer;
            z-index: 10;
        }
        .is-glowing {
            background-color: #ffeb3b;
            animation: pulse-glow 1.5s infinite;
        }
        .shut-glow {
            background-color: #555;
            box-shadow: none;
            opacity: 0.6;
        }
        @keyframes pulse-glow {
            0% { box-shadow: 0 0 5px 2px rgba(255, 235, 59, 0.6); }
            50% { box-shadow: 0 0 20px 8px rgba(255, 235, 59, 1); }
            100% { box-shadow: 0 0 5px 2px rgba(255, 235, 59, 0.6); }
        }

        /* Tooltip */
        .point-tooltip {
            position: absolute;
            bottom: 35px;
            left: 50%;
            transform: translateX(-50%);
            background: #f4eacc;
            padding: 15px 25px;
            border-radius: 6px;
            border: 2px solid #5c4033;
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
            display: none;
            white-space: nowrap;
            font-family: 'Segoe UI', sans-serif;
            font-size: 18px;
            font-weight: bold;
            pointer-events: none;
            z-index: 20;
        }
        .point-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -8px;
            border-width: 8px;
            border-style: solid;
            border-color: #5c4033 transparent transparent transparent;
        }
        .line-blue { color: #1976D2; margin-bottom: 8px; }
        .line-red { color: #d32f2f; }

        /* Antique Fixed Map Text & Arrows */
        .map-text-item {
            position: absolute;
            color: #000;
            background: transparent;
            font-family: 'IM Fell English', serif;
            font-size: 26px;
            font-weight: bold;
            user-select: none;
            white-space: nowrap;
            z-index: 5;
            transform-origin: center center;
            border: 1px dashed transparent;
            text-shadow: 1px 1px 3px rgba(255,255,255,0.8), -1px -1px 3px rgba(255,255,255,0.8);
            pointer-events: none; /* Make text uninteractable so you can't accidentally click it */
        }
    </style>
</head>
<body>

    <div id="toolbar">
        <a id="homeBtn" href="index.html">Home</a>
        <input type="text" id="searchBar" placeholder="Search for locations...">
    </div>

    <div id="map-viewport">
        <div id="map-content" style="transform: translate(111px, 42px) scale(0.6);">
            <img src="london.png" id="map-bg" alt="Map Background">
            
            <div id="map-borders">
                <div class="border-row border-top">
                    <div class="border-cell">u</div>
                    <div class="border-cell">i</div>
                    <div class="border-cell">e</div>
                    <div class="border-cell">l</div>
                    <div class="border-cell">t</div>
                    <div class="border-cell">t</div>
                    <div class="border-cell">o</div>
                    <div class="border-cell">a</div>
                    <div class="border-cell">t</div>
                    <div class="border-cell">c</div>
                    <div class="border-cell">c</div>
                    <div class="border-cell">o</div>
                    <div class="border-cell">&nbsp;</div>
                    <div class="border-cell">o</div>
                    <div class="border-cell">p</div>
                    <div class="border-cell">s</div>
                    <div class="border-cell">l</div>
                </div>
                
                <div class="border-col border-left">
                    <div class="border-cell">r</div>
                    <div class="border-cell">o</div>
                    <div class="border-cell">m</div>
                    <div class="border-cell">&nbsp;</div>
                    <div class="border-cell">n</div>
                    <div class="border-cell">n</div>
                    <div class="border-cell">f</div>
                    <div class="border-cell">:</div>
                </div>
                
                <div class="border-col border-right">
                    <div class="border-cell">&nbsp;</div>
                    <div class="border-cell">'</div>
                    <div class="border-cell">&nbsp;</div>
                    <div class="border-cell">x</div>
                    <div class="border-cell">n</div>
                    <div class="border-cell">e</div>
                    <div class="border-cell">i</div>
                    <div class="border-cell">o</div>
                </div>

                <div class="border-row border-bottom">
                    <div class="border-cell small">start</div>
                    <div class="border-cell">a</div>
                    <div class="border-cell">&nbsp;</div>
                    <div class="border-cell">b</div>
                    <div class="border-cell">v</div>
                    <div class="border-cell">n</div>
                    <div class="border-cell">e</div>
                    <div class="border-cell">o</div>
                    <div class="border-cell">e</div>
                    <div class="border-cell">a</div>
                    <div class="border-cell">r</div>
                    <div class="border-cell">l</div>
                    <div class="border-cell">t</div>
                    <div class="border-cell">i</div>
                    <div class="border-cell">s</div>
                    <div class="border-cell">r</div>
                    <div class="border-cell">t</div>
                </div>
            </div>

            <div class="glowing-point is-glowing" data-blue-text="a1: westminster abbey" data-red-text="11" style="left: 995.997px; top: 1049.67px;">
                <div class="point-tooltip">
                    <div class="line-blue">A1: Westminster Abbey</div>
                    <div class="line-red">11</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="a2: the palace of westminster & big ben" data-red-text="21" style="left: 954.764px; top: 834.524px;">
                <div class="point-tooltip">
                    <div class="line-blue">A2: The Palace of Westminster & Big Ben</div>
                    <div class="line-red">21</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="a3: tower of london" data-red-text="15" style="left: 1971.9px; top: 538.572px;">
                <div class="point-tooltip">
                    <div class="line-blue">A3: Tower of London</div>
                    <div class="line-red">15</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="a5: tower bridge" data-red-text="5" style="left: 1945px; top: 753.335px;">
                <div class="point-tooltip">
                    <div class="line-blue">A5: Tower Bridge</div>
                    <div class="line-red">5</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="nelson's column" data-red-text="24" style="left: 1566.67px; top: 1021.66px;">
                <div class="point-tooltip">
                    <div class="line-blue">Nelson's Column</div>
                    <div class="line-red">24</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="a4: the crystal palace" data-red-text="12 - qvtbslnfhpvglo" style="left: 1423.34px; top: 1336.67px;">
                <div class="point-tooltip">
                    <div class="line-blue">A4: The Crystal Palace</div>
                    <div class="line-red">12 - QVTBSLNFHPVGLO</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="st. paul's cathedral" data-red-text="14" style="left: 1632px; top: 482px;">
                <div class="point-tooltip">
                    <div class="line-blue">St. Paul's Cathedral</div>
                    <div class="line-red">14</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="just a compass" data-red-text="" style="left: 2478px; top: 1386px;">
                <div class="point-tooltip">
                    <div class="line-blue">Just a Compass</div>
                    <div class="line-red"></div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="c9: st martin-in-the-fields" data-red-text="ini" style="left: 1038px; top: 602px;">
                <div class="point-tooltip">
                    <div class="line-blue">C9: St Martin-in-the-Fields</div>
                    <div class="line-red">INI</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="c1: westminster cathedral" data-red-text="all" style="left: 65.7143px; top: 889.428px;">
                <div class="point-tooltip">
                    <div class="line-blue">C1: Westminster Cathedral</div>
                    <div class="line-red">ALL</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="c2: st mary le strand" data-red-text="ous" style="left: 1281px; top: 572px;">
                <div class="point-tooltip">
                    <div class="line-blue">C2: St Mary le Strand</div>
                    <div class="line-red">OUS</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="c4: temple church" data-red-text="chu" style="left: 2050px; top: 290.667px;">
                <div class="point-tooltip">
                    <div class="line-blue">C4: Temple Church</div>
                    <div class="line-red">CHU</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="c3: st margaret's" data-red-text="fal" style="left: 1084px; top: 914px;">
                <div class="point-tooltip">
                    <div class="line-blue">C3: St Margaret's</div>
                    <div class="line-red">FAL</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="c5: st martin-in-the-fields" data-red-text="lenh" style="left: 724px; top: 524px;">
                <div class="point-tooltip">
                    <div class="line-blue">C5: St Martin-in-the-Fields</div>
                    <div class="line-red">LENH</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="c6: st nicholas cole abbey" data-red-text="rch" style="left: 1872px; top: 358px;">
                <div class="point-tooltip">
                    <div class="line-blue">C6: St Nicholas Cole Abbey</div>
                    <div class="line-red">RCH</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="c7: st benet’s welsh church paul's wharf" data-red-text="ide" style="left: 1706.62px; top: 724.857px;">
                <div class="point-tooltip">
                    <div class="line-blue">C7: St Benet’s Welsh Church Paul's Wharf</div>
                    <div class="line-red">IDE</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="c8: st james garlickhythe" data-red-text="dec" style="left: 986px; top: 120px;">
                <div class="point-tooltip">
                    <div class="line-blue">C8: St James Garlickhythe</div>
                    <div class="line-red">DEC</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="c10: southwark cathedral" data-red-text="ode" style="left: 1260px; top: 762px;">
                <div class="point-tooltip">
                    <div class="line-blue">C10: Southwark Cathedral</div>
                    <div class="line-red">ODE</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="c11: st george's cathedral" data-red-text="nco" style="left: 1192px; top: 1204px;">
                <div class="point-tooltip">
                    <div class="line-blue">C11: St George's Cathedral</div>
                    <div class="line-red">NCO</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="c12: st michael paternoster royal" data-red-text="itn" style="left: 1172px; top: 34px;">
                <div class="point-tooltip">
                    <div class="line-blue">C12: St Michael Paternoster Royal</div>
                    <div class="line-red">ITN</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="c13: christ church southwark" data-red-text="ngru" style="left: 1732px; top: 1178px;">
                <div class="point-tooltip">
                    <div class="line-blue">C13: Christ Church Southwark</div>
                    <div class="line-red">NGRU</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="c14: sagrada família" data-red-text="ame" style="left: 803.429px; top: 608.571px;">
                <div class="point-tooltip">
                    <div class="line-blue">C14: Sagrada Família</div>
                    <div class="line-red">AME</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="s2: westminster underground station" data-red-text="a =1, b + c = e" style="left: 283.34px; top: 445.001px;">
                <div class="point-tooltip">
                    <div class="line-blue">S2: Westminster Underground Station</div>
                    <div class="line-red">A =1, B + C = E</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="h7: king's college hospital" data-red-text="pel" style="left: 2393.33px; top: 1078.33px;">
                <div class="point-tooltip">
                    <div class="line-blue">H7: King's College Hospital</div>
                    <div class="line-red">PEL</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="h2: charing cross hospital" data-red-text="jan" style="left: 536.667px; top: 280px;">
                <div class="point-tooltip">
                    <div class="line-blue">H2: Charing Cross Hospital</div>
                    <div class="line-red">JAN</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="h6: evelina london children's hospital" data-red-text="oda" style="left: 1576.67px; top: 1216.67px;">
                <div class="point-tooltip">
                    <div class="line-blue">H6: Evelina London Children's Hospital</div>
                    <div class="line-red">ODA</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="h1: westminster hospital" data-red-text="whi" style="left: 1070px; top: 376.666px;">
                <div class="point-tooltip">
                    <div class="line-blue">H1: Westminster Hospital</div>
                    <div class="line-red">WHI</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="h3: st thomas' hospital" data-red-text="tec" style="left: 913.333px; top: 1230.33px;">
                <div class="point-tooltip">
                    <div class="line-blue">H3: St Thomas' Hospital</div>
                    <div class="line-red">TEC</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="h4: royal waterloo hospital for children and women" data-red-text="ego" style="left: 1819px; top: 979.999px;">
                <div class="point-tooltip">
                    <div class="line-blue">H4: Royal Waterloo Hospital for Children and Women</div>
                    <div class="line-red">EGO</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="h5: st bartholomew's hospital" data-red-text="hap" style="left: 1511.67px; top: 320px;">
                <div class="point-tooltip">
                    <div class="line-blue">H5: St Bartholomew's Hospital</div>
                    <div class="line-red">HAP</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="h8: maudsley hospital" data-red-text="llp" style="left: 2310px; top: 963.333px;">
                <div class="point-tooltip">
                    <div class="line-blue">H8: Maudsley Hospital</div>
                    <div class="line-red">LLP</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="h9: guy's hospital" data-red-text="roa" style="left: 2380px; top: 663.334px;">
                <div class="point-tooltip">
                    <div class="line-blue">H9: Guy's Hospital</div>
                    <div class="line-red">ROA</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="h10: the lister hospital" data-red-text="ray" style="left: 620px; top: 1226px;">
                <div class="point-tooltip">
                    <div class="line-blue">H10: The Lister Hospital</div>
                    <div class="line-red">RAY</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="h11: dulwich hospital" data-red-text="dgo" style="left: 1878px; top: 1350px;">
                <div class="point-tooltip">
                    <div class="line-blue">H11: Dulwich Hospital</div>
                    <div class="line-red">DGO</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="h12: london bridge hospital" data-red-text="odd" style="left: 2142px; top: 526px;">
                <div class="point-tooltip">
                    <div class="line-blue">H12: London Bridge Hospital</div>
                    <div class="line-red">ODD</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="h13: university college hospital" data-red-text="the" style="left: 1236px; top: 210px;">
                <div class="point-tooltip">
                    <div class="line-blue">H13: University College Hospital</div>
                    <div class="line-red">THE</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="h14: chelsea and westminster hospital" data-red-text="toe" style="left: 820px; top: 1018px;">
                <div class="point-tooltip">
                    <div class="line-blue">H14: Chelsea and Westminster Hospital</div>
                    <div class="line-red">TOE</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="h15: mile end hospital" data-red-text="ree" style="left: 600px; top: 852px;">
                <div class="point-tooltip">
                    <div class="line-blue">H15: Mile End Hospital</div>
                    <div class="line-red">REE</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="h16: st john & st elizabeth hospital london" data-red-text="ven" style="left: 146px; top: 962px;">
                <div class="point-tooltip">
                    <div class="line-blue">H16: St John & St Elizabeth Hospital London</div>
                    <div class="line-red">VEN</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="h17: the london independent hospital" data-red-text="ver" style="left: 1828px; top: 246px;">
                <div class="point-tooltip">
                    <div class="line-blue">H17: The London Independent Hospital</div>
                    <div class="line-red">VER</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="p3: wapping police station" data-red-text="1 - 5 - 6 - 14 - 15 - 9 - 20" style="left: 1948px; top: 1298px;">
                <div class="point-tooltip">
                    <div class="line-blue">P3: Wapping Police Station</div>
                    <div class="line-red">1 - 5 - 6 - 14 - 15 - 9 - 20</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="p5: union street police office (southwark)" data-red-text="16 - 28 - 1 - 8 - 22 - 28 - 3 - 14 - 14" style="left: 2114px; top: 888px;">
                <div class="point-tooltip">
                    <div class="line-blue">P5: Union Street Police Office (Southwark)</div>
                    <div class="line-red">16 - 28 - 1 - 8 - 22 - 28 - 3 - 14 - 14</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="p2: carter street police station " data-red-text="7 - 4 - 2 - 8 - 5" style="left: 1338px; top: 812px;">
                <div class="point-tooltip">
                    <div class="line-blue">P2: Carter Street Police Station </div>
                    <div class="line-red">7 - 4 - 2 - 8 - 5</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="p1: kennington lane police office (southwark)" data-red-text="22 - 29 - 3 - 2 - 34 - 12 - 11" style="left: 1290px; top: 450px;">
                <div class="point-tooltip">
                    <div class="line-blue">P1: Kennington Lane Police Office (Southwark)</div>
                    <div class="line-red">22 - 29 - 3 - 2 - 34 - 12 - 11</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="p4: new scotland yard (victoria embankment) " data-red-text="8 - 6 - 5 - 9 - 7 - 17 - 20 - 1" style="left: 1122px; top: 298px;">
                <div class="point-tooltip">
                    <div class="line-blue">P4: New Scotland Yard (Victoria Embankment) </div>
                    <div class="line-red">8 - 6 - 5 - 9 - 7 - 17 - 20 - 1</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="s1: victoria station" data-red-text="the famous attractions are in order" style="left: 316px; top: 945px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">S1: Victoria Station</div>
                    <div class="line-red">The famous attractions are in order</div>
                </div>
            </div>
            <div class="glowing-point is-glowing" data-blue-text="s3: london bridge station" data-red-text="find beatrix potter" style="left: 2638px; top: 603px;">
                <div class="point-tooltip" style="display: none;">
                    <div class="line-blue">S3: London Bridge Station</div>
                    <div class="line-red">Find Beatrix Potter</div>
                </div>
            </div>

            <div class="map-text-item" data-angle="90" style="left: 1391.43px; top: 442.857px; transform: translate(-50%, -50%) rotate(90deg);">➤</div>
            <div class="map-text-item" data-angle="27" style="left: 1509.71px; top: 849.813px; transform: translate(-50%, -50%) rotate(27deg);">➤</div>
            <div class="map-text-item" data-angle="295" style="left: 2212.57px; top: 1217.43px; transform: translate(-50%, -50%) rotate(295deg);">➤</div>
            <div class="map-text-item" data-angle="180" style="left: 2663.72px; top: 377.428px; transform: translate(-50%, -50%) rotate(180deg);">➤</div>
            <div class="map-text-item" data-angle="328" style="left: 794.857px; top: 1375.42px; transform: translate(-50%, -50%) rotate(328deg);">➤</div>
            <div class="map-text-item" data-angle="0" style="left: 1103.57px; top: 1007.14px; transform: translate(-50%, -50%) rotate(0deg);">IS</div>
            <div class="map-text-item" data-angle="110" style="left: 1210.72px; top: 1094.28px; transform: translate(-50%, -50%) rotate(110deg);">AA</div>
            <div class="map-text-item" data-angle="40" style="left: 1234.04px; top: 1320.46px; transform: translate(-50%, -50%) rotate(40deg);">CN</div>
            <div class="map-text-item" data-angle="320" style="left: 1576.42px; top: 1331.43px; transform: translate(-50%, -50%) rotate(320deg);">EW</div>
            <div class="map-text-item" data-angle="250" style="left: 1597.86px; top: 1168.58px; transform: translate(-50%, -50%) rotate(250deg);">TO</div>
            <div class="map-text-item" data-angle="310" style="left: 1643.57px; top: 882.857px; transform: translate(-50%, -50%) rotate(310deg);">NF</div>
            <div class="map-text-item" data-angle="290" style="left: 1760.71px; top: 672.858px; transform: translate(-50%, -50%) rotate(290deg);">OL</div>
            <div class="map-text-item" data-angle="25" style="left: 1746.42px; top: 557.143px; transform: translate(-50%, -50%) rotate(25deg);">LO</div>
            <div class="map-text-item" data-angle="0" style="left: 1440.71px; top: 485.714px; transform: translate(-50%, -50%) rotate(0deg);">WT</div>
            <div class="map-text-item" data-angle="320" style="left: 994.999px; top: 724.286px; transform: translate(-50%, -50%) rotate(320deg);">HE</div>
            <div class="map-text-item" data-angle="10" style="left: 791.909px; top: 788.333px; transform: translate(-50%, -50%) rotate(10deg);">MO</div>
            <div class="map-text-item" data-angle="0" style="left: 619.29px; top: 790px; transform: translate(-50%, -50%) rotate(0deg);">RN</div>
            <div class="map-text-item" data-angle="0" style="left: 435px; top: 804.285px; transform: translate(-50%, -50%) rotate(0deg);">IN</div>
            <div class="map-text-item" data-angle="0" style="left: 209.286px; top: 812.857px; transform: translate(-50%, -50%) rotate(0deg);">GC</div>
            <div class="map-text-item" data-angle="0" style="left: 795.717px; top: 1355.72px; transform: translate(-50%, -50%) rotate(0deg);">CHA</div>
            <div class="map-text-item" data-angle="0" style="left: 1515.71px; top: 822.857px; transform: translate(-50%, -50%) rotate(0deg);">RLE</div>
            <div class="map-text-item" data-angle="0" style="left: 2244.28px; top: 1204.29px; transform: translate(-50%, -50%) rotate(0deg);">SDI</div>
            <div class="map-text-item" data-angle="0" style="left: 2664.29px; top: 401.428px; transform: translate(-50%, -50%) rotate(0deg);">CKE</div>
            <div class="map-text-item" data-angle="320" style="left: 74px; top: 386px; transform: translate(-50%, -50%) rotate(320deg);">➤</div>
            <div class="map-text-item" data-angle="0" style="left: 77.1432px; top: 360px; transform: translate(-50%, -50%) rotate(0deg);">NSH</div>
            <div class="map-text-item" data-angle="0" style="left: 457.143px; top: 47.1433px; transform: translate(-50%, -50%) rotate(0deg);">➤</div>
            <div class="map-text-item" data-angle="0" style="left: 440px; top: 12.8576px; transform: translate(-50%, -50%) rotate(0deg);">OSP</div>
            <div class="map-text-item" data-angle="130" style="left: 1722.85px; top: 67.1433px; transform: translate(-50%, -50%) rotate(130deg);">➤</div>
            <div class="map-text-item" data-angle="0" style="left: 1725.72px; top: 40.0002px; transform: translate(-50%, -50%) rotate(0deg);">ITA</div>
            <div class="map-text-item" data-angle="180" style="left: 2465.72px; top: 1387.14px; transform: translate(-50%, -50%) rotate(180deg);">➤</div>
            <div class="map-text-item" data-angle="0" style="left: 1365.71px; top: 468.572px; transform: translate(-50%, -50%) rotate(0deg);">LSE</div>
            <div class="map-text-item" data-angle="0" style="left: 1389.72px; top: 1495.14px; transform: translate(-50%, -50%) rotate(0deg);">VEN</div>
            <div class="map-text-item" data-angle="130" style="left: 1086.66px; top: 1103.34px; transform: translate(-50%, -50%) rotate(130deg);">SS</div>
            <div class="map-text-item" data-angle="0" style="left: 856.663px; top: 1250px; transform: translate(-50%, -50%) rotate(0deg);">AO</div>
            <div class="map-text-item" data-angle="0" style="left: 568.337px; top: 1270px; transform: translate(-50%, -50%) rotate(0deg);">TV</div>
            <div class="map-text-item" data-angle="0" style="left: 238.333px; top: 1373.33px; transform: translate(-50%, -50%) rotate(0deg);">RQ</div>
            <div class="map-text-item" data-angle="310" style="left: 758.334px; top: 1460px; transform: translate(-50%, -50%) rotate(310deg);">TB</div>
            <div class="map-text-item" data-angle="0" style="left: 1193.33px; top: 834.997px; transform: translate(-50%, -50%) rotate(0deg);">NS</div>
            <div class="map-text-item" data-angle="45" style="left: 1108.33px; top: 1186.66px; transform: translate(-50%, -50%) rotate(45deg);">RF</div>
            <div class="map-text-item" data-angle="-20" style="left: 1321.67px; top: 971.667px; transform: translate(-50%, -50%) rotate(-20deg);">LL</div>
            <div class="map-text-item" data-angle="0" style="left: 1294.99px; top: 1253.33px; transform: translate(-50%, -50%) rotate(0deg);">IR</div>
            <div class="map-text-item" data-angle="0" style="left: 1795px; top: 1368.33px; transform: translate(-50%, -50%) rotate(0deg);">PR</div>
            <div class="map-text-item" data-angle="30" style="left: 2061.66px; top: 1233.33px; transform: translate(-50%, -50%) rotate(30deg);">GE</div>
            <div class="map-text-item" data-angle="0" style="left: 2095px; top: 1248.33px; transform: translate(-50%, -50%) rotate(0deg);">➤</div>
            <div class="map-text-item" data-angle="0" style="left: 2075px; top: 1065px; transform: translate(-50%, -50%) rotate(0deg);">XV</div>
            <div class="map-text-item" data-angle="0" style="left: 1440px; top: 750px; transform: translate(-50%, -50%) rotate(0deg);">IE</div>
            <div class="map-text-item" data-angle="0" style="left: 1808.34px; top: 1158.33px; transform: translate(-50%, -50%) rotate(0deg);">OS</div>
            <div class="map-text-item" data-angle="20" style="left: 1633.33px; top: 1015px; transform: translate(-50%, -50%) rotate(20deg);">PO</div>
            <div class="map-text-item" data-angle="180" style="left: 2678.33px; top: 973.333px; transform: translate(-50%, -50%) rotate(180deg);">➤</div>
            <div class="map-text-item" data-angle="0" style="left: 2673.33px; top: 998.333px; transform: translate(-50%, -50%) rotate(0deg);">LON</div>
            <div class="map-text-item" data-angle="0" style="left: 526.67px; top: 1041.67px; transform: translate(-50%, -50%) rotate(0deg);">DON</div>
            <div class="map-text-item" data-angle="90" style="left: 528.333px; top: 1060px; transform: translate(-50%, -50%) rotate(90deg);">➤</div>
            <div class="map-text-item" data-angle="-30" style="left: 653.333px; top: 1110px; transform: translate(-50%, -50%) rotate(-30deg);">NA</div>
            <div class="map-text-item" data-angle="45" style="left: 900.003px; top: 1030px; transform: translate(-50%, -50%) rotate(45deg);">BKB</div>
            <div class="map-text-item" data-angle="0" style="left: 1338px; top: 566px; transform: translate(-50%, -50%) rotate(0deg);">MKB</div>
            <div class="map-text-item" data-angle="-70" style="left: 1141.67px; top: 751.667px; transform: translate(-50%, -50%) rotate(-70deg);">BAR</div>
            <div class="map-text-item" data-angle="145" style="left: 760.003px; top: 211.667px; transform: translate(-50%, -50%) rotate(145deg);">➤</div>
            <div class="map-text-item" data-angle="0" style="left: 768.337px; top: 188.334px; transform: translate(-50%, -50%) rotate(0deg);">CEL</div>
            <div class="map-text-item" data-angle="45" style="left: 715.238px; top: 881.191px; transform: translate(-50%, -50%) rotate(45deg);">ONA</div>
            <div class="map-text-item" data-angle="90" style="left: 379.527px; top: 639.762px; transform: translate(-50%, -50%) rotate(90deg);">VL</div>
            <div class="map-text-item" data-angle="0" style="left: 258.337px; top: 611.667px; transform: translate(-50%, -50%) rotate(0deg);">BB</div>
            <div class="map-text-item" data-angle="0" style="left: 1960.67px; top: 935.667px; transform: translate(-50%, -50%) rotate(0deg);">PM</div>
            <div class="map-text-item" data-angle="0" style="left: 2066.67px; top: 636.666px; transform: translate(-50%, -50%) rotate(0deg);">SUK</div>
            <div class="map-text-item" data-angle="0" style="left: 2408.33px; top: 596.667px; transform: translate(-50%, -50%) rotate(0deg);">CYK</div>
            <div class="map-text-item" data-angle="0" style="left: 2318.34px; top: 1030px; transform: translate(-50%, -50%) rotate(0deg);">BLD</div>
            <div class="map-text-item" data-angle="45" style="left: 866.666px; top: 1146.67px; transform: translate(-50%, -50%) rotate(45deg);">TZZ</div>
            <div class="map-text-item" data-angle="0" style="left: 289.997px; top: 1016.67px; transform: translate(-50%, -50%) rotate(0deg);">MON</div>
            <div class="map-text-item" data-angle="-90" style="left: 40px; top: 1305px; transform: translate(-50%, -50%) rotate(-90deg);">➤</div>
            <div class="map-text-item" data-angle="0" style="left: 31.6667px; top: 1276.67px; transform: translate(-50%, -50%) rotate(0deg);">PAR</div>
            <div class="map-text-item" data-angle="70" style="left: 43.3333px; top: 711.667px; transform: translate(-50%, -50%) rotate(70deg);">JUT</div>
            <div class="map-text-item" data-angle="0" style="left: 1296.66px; top: 643.333px; transform: translate(-50%, -50%) rotate(0deg);">AL</div>
            <div class="map-text-item" data-angle="0" style="left: 1720.23px; top: 414.524px; transform: translate(-50%, -50%) rotate(0deg);">MF</div>
            <div class="map-text-item" data-angle="60" style="left: 1758.33px; top: 935px; transform: translate(-50%, -50%) rotate(60deg);">TLI</div>
            <div class="map-text-item" data-angle="0" style="left: 1776.67px; top: 475px; transform: translate(-50%, -50%) rotate(0deg);">WE</div>
            <div class="map-text-item" data-angle="0" style="left: 1255px; top: 425px; transform: translate(-50%, -50%) rotate(0deg);">BA</div>
            <div class="map-text-item" data-angle="0" style="left: 898.337px; top: 486.667px; transform: translate(-50%, -50%) rotate(0deg);">RE</div>
            <div class="map-text-item" data-angle="0" style="left: 1378.33px; top: 123.334px; transform: translate(-50%, -50%) rotate(0deg);">BEA</div>
            <div class="map-text-item" data-angle="60" style="left: 633.33px; top: 658.333px; transform: translate(-50%, -50%) rotate(60deg);">AZ</div>
            <div class="map-text-item" data-angle="0" style="left: 1140px; top: 510px; transform: translate(-50%, -50%) rotate(0deg);">VV</div>
            <div class="map-text-item" data-angle="0" style="left: 2069.99px; top: 871.667px; transform: translate(-50%, -50%) rotate(0deg);">EVN</div>
            <div class="map-text-item" data-angle="0" style="left: 1810px; top: 213.333px; transform: translate(-50%, -50%) rotate(0deg);">JJK</div>
            <div class="map-text-item" data-angle="0" style="left: 2571.67px; top: 511.667px; transform: translate(-50%, -50%) rotate(0deg);">NAR</div>
            <div class="map-text-item" data-angle="0" style="left: 2241.67px; top: 413.333px; transform: translate(-50%, -50%) rotate(0deg);">UTO</div>
            <div class="map-text-item" data-angle="0" style="left: 2052px; top: 136px; transform: translate(-50%, -50%) rotate(0deg);">AZN</div>
        </div>
    </div>

    <script>
        // --- Core Variables ---
        // Retaining your exact pan/zoom settings so it loads right where you left it
        let scale = 0.6; 
        let panX = 111;
        let panY = 42;
        
        const viewport = document.getElementById('map-viewport');
        const content = document.getElementById('map-content');

        // --- Initialization ---
        window.onload = () => {
            // Simply attach click events to open tooltips. No more dragging.
            document.querySelectorAll('.glowing-point').forEach(point => {
                point.addEventListener('click', (e) => {
                    e.stopPropagation(); // prevent panning the map on click
                    const tooltip = point.querySelector('.point-tooltip');
                    tooltip.style.display = tooltip.style.display === 'block' ? 'none' : 'block';
                });
            });
            updateTransform();
        };

        // --- Map Pan & Zoom ---
        let isPanning = false;
        let startPanX, startPanY, initialPanX, initialPanY;

        viewport.addEventListener('mousedown', (e) => {
            // Prevent panning when clicking points, text, or the search bar
            if (e.target.closest('.glowing-point') || e.target.closest('.map-text-item') || e.target.id === 'searchBar') return;
            isPanning = true;
            startPanX = e.clientX;
            startPanY = e.clientY;
            initialPanX = panX;
            initialPanY = panY;
            viewport.style.cursor = 'grabbing';
        });

        window.addEventListener('mousemove', (e) => {
            if (!isPanning) return;
            panX = initialPanX + (e.clientX - startPanX);
            panY = initialPanY + (e.clientY - startPanY);
            updateTransform();
        });

        window.addEventListener('mouseup', () => {
            isPanning = false;
            viewport.style.cursor = 'grab';
        });

        viewport.addEventListener('wheel', (e) => {
            e.preventDefault();
            const zoomDelta = e.deltaY > 0 ? -0.1 : 0.1;
            adjustZoom(zoomDelta);
        }, { passive: false });

        function adjustZoom(delta) {
            scale += delta;
            scale = Math.max(0.2, Math.min(scale, 5));
            updateTransform();
        }

        function updateTransform() {
            content.style.transform = `translate(${panX}px, ${panY}px) scale(${scale})`;
        }

        // --- Search Functionality ---
        document.getElementById('searchBar').addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            const points = document.querySelectorAll('.glowing-point');
            
            points.forEach(point => {
                if (query === "") {
                    point.classList.add('is-glowing');
                    point.classList.remove('shut-glow');
                } else {
                    const bText = point.dataset.blueText || "";
                    const rText = point.dataset.redText || "";
                    if (bText.includes(query) || rText.includes(query)) {
                        point.classList.add('is-glowing');
                        point.classList.remove('shut-glow');
                    } else {
                        point.classList.remove('is-glowing');
                        point.classList.add('shut-glow');
                    }
                }
            });
        });

    </script>
</body>
</html>